# ============================================================================
# VIZIER MED BACKEND - ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and fill in your values
# For development, most values can be left as defaults
# For production, all values must be configured properly
# ============================================================================

# ============================================================================
# DJANGO SETTINGS
# ============================================================================

# Set to False in production
DEBUG=True

# Generate a strong secret key for production
# python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=dev-secret-key-change-in-production

# Comma-separated list of allowed hosts
ALLOWED_HOSTS=localhost,127.0.0.1,web

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Format: postgresql://user:password@host:port/database
# For development with docker-compose, use the default values below
# For production, use AWS RDS endpoint

DATABASE_URL=postgresql://vizier_user:vizier_password@db:5432/vizier_med

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
# For development with docker-compose, use the default value below
# For production, use AWS ElastiCache endpoint

REDIS_URL=redis://redis:6379/0

# ============================================================================
# AWS COGNITO - AUTHENTICATION
# ============================================================================
# For development without authentication, leave these empty or use dummy values
# For production, configure with real AWS Cognito values

# AWS region where your Cognito User Pool is located
# Example: us-east-1, eu-west-1, ap-southeast-1
COGNITO_REGION=us-east-1

# Your Cognito User Pool ID
# Format: us-east-1_xxxxxxxxx
# Get from: AWS Console → Cognito → User Pools → Your Pool → General Settings
COGNITO_USER_POOL_ID=us-east-1_xxxxxxxxx

# Your Cognito App Client ID
# Get from: AWS Console → Cognito → User Pools → Your Pool → App Clients
COGNITO_CLIENT_ID=xxxxxxxxxxxxxxxxxxxxxxxxxx

# (Optional) Hosted UI convenience values (useful for Postman)
# These can be pulled from Terraform outputs:
# - cognito_hosted_ui_base_url
# - cognito_oauth_token_url
COGNITO_HOSTED_UI_BASE_URL=
COGNITO_OAUTH_TOKEN_URL=

# ============================================================================
# AWS S3 - FILE STORAGE
# ============================================================================
# For development without S3, leave AWS credentials empty
# Files will be stored locally in /tmp/vizier-med/
# For production, configure with real AWS credentials

# AWS region where your S3 bucket is located
AWS_REGION=us-east-1

# AWS IAM Access Key ID
# Get from: AWS Console → IAM → Users → Your User → Security Credentials
AWS_ACCESS_KEY_ID=

# AWS IAM Secret Access Key
# Get from: AWS Console → IAM → Users → Your User → Security Credentials
AWS_SECRET_ACCESS_KEY=

# S3 bucket name for storing results
# Bucket must exist and be accessible with the credentials above
S3_BUCKET=vizier-med-bucket-dev

# ============================================================================
# INFERENCE API - YOUR SEGMENTATION SERVICE
# ============================================================================
# This is where the DICOM NPZ files are sent for processing
# Configure this with your API endpoint

# URL of your inference API
# Examples:
#   http://localhost:8001 (local development)
#   http://inference-api:8001 (Docker container)
#   https://api.example.com (remote server)
#   https://inference-api.us-east-1.amazonaws.com (AWS)
INFERENCE_API_URL=http://localhost:8001

# Timeout in seconds for inference API requests
# Increase if your processing takes longer
INFERENCE_API_TIMEOUT=300

# ============================================================================
# DICOM PROCESSING PARAMETERS
# ============================================================================
# These parameters control how DICOM files are preprocessed

# Target image dimensions (width, height) for XY plane
# Standard: (512, 512)
DICOM_TARGET_HW=(512, 512)

# Target number of slices (Z dimension)
# Standard: 64
DICOM_TARGET_SLICES=64

# Windowing center (Hounsfield units)
# Standard for brain: 40
DICOM_WINDOW_CENTER=40

# Windowing width (Hounsfield units)
# Standard for brain: 400
DICOM_WINDOW_WIDTH=400

# ============================================================================
# OPTIONAL FEATURES
# ============================================================================

# Enable seat limit checking (for multi-user clinics)
ENABLE_SEAT_LIMIT_CHECK=True

# Create superuser on startup (for development)
CREATE_SUPERUSER=False

# Superuser password (only used if CREATE_SUPERUSER=True)
SUPERUSER_PASSWORD=admin123

# ============================================================================
# LOGGING
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ============================================================================
# NOTES FOR DEVELOPMENT
# ============================================================================
#
# 1. AUTHENTICATION (Cognito):
#    - Leave COGNITO_* fields empty for development without authentication
#    - Authentication will be disabled and you can test freely
#    - For production, configure real Cognito User Pool
#
# 2. FILE STORAGE (S3):
#    - Leave AWS_* fields empty for development
#    - Files will be stored locally in /tmp/vizier-med/
#    - For production, create S3 bucket and configure credentials
#
# 3. INFERENCE API:
#    - Set to your API endpoint (local or remote)
#    - Your API must have these endpoints:
#      POST /jobs/submit (submit NPZ file)
#      GET /jobs/{job_id}/status (get processing status)
#      GET /jobs/{job_id}/results (download results)
#
# 4. DATABASE:
#    - For development with docker-compose, use default values
#    - For production, use AWS RDS endpoint
#
# 5. REDIS:
#    - For development with docker-compose, use default values
#    - For production, use AWS ElastiCache endpoint
#
# ============================================================================
# QUICK START CHECKLIST
# ============================================================================
#
# [ ] Copy this file to .env
# [ ] Set DEBUG=True for development
# [ ] Set INFERENCE_API_URL to your API endpoint
# [ ] Leave Cognito fields empty for development
# [ ] Leave AWS fields empty for development (unless using S3)
# [ ] Run: docker-compose up -d
# [ ] Test: curl http://localhost:8000/api/health/
#
# ============================================================================
